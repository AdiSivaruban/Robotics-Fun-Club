<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects - Robotics Fun Club</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="projects.css">
</head>
<body>
    <div class="animated-bg">
        <div class="floating-shapes">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="gear">⚙️</div>
            <div class="gear">⚙️</div>
            <div class="gear">⚙️</div>
        </div>
        <div class="particles">
            <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
            <div class="particle" style="left: 20%; animation-delay: 2s;"></div>
            <div class="particle" style="left: 30%; animation-delay: 4s;"></div>
            <div class="particle" style="left: 40%; animation-delay: 6s;"></div>
            <div class="particle" style="left: 50%; animation-delay: 8s;"></div>
            <div class="particle" style="left: 60%; animation-delay: 10s;"></div>
            <div class="particle" style="left: 70%; animation-delay: 12s;"></div>
            <div class="particle" style="left: 80%; animation-delay: 14s;"></div>
            <div class="particle" style="left: 90%; animation-delay: 16s;"></div>
        </div>
    </div>

    <nav>
        <div class="nav-container">
            <div class="logo">
                <div class="robot-icon"></div>
                Robotics Fun Club
            </div>
            <ul class="nav-links">
                <li><a href="home.html">Home</a></li>
                <li><a href="projects.html">Projects</a></li>
                <li><a href="gallery.html">Gallery</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="events.html">Events</a></li>
                <li><a href="reviews.html">Reviews</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <h1 class="section-title">🔧 DIY Projects</h1>
        
        <!-- Filter Section -->
        <div class="project-filters">
            <button class="filter-btn active" onclick="filterProjects('all')">All Projects</button>
            <button class="filter-btn" onclick="filterProjects('easy')">Easy</button>
            <button class="filter-btn" onclick="filterProjects('medium')">Medium</button>
            <button class="filter-btn" onclick="filterProjects('hard')">Advanced</button>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-section">
            <h3>🏆 Your Building Progress</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="progress-text">Complete projects to unlock achievements!</p>
        </div>
        
        <div class="projects-grid">
            <!-- Rubber Band Boat -->
            <div class="project-card interactive-card" data-difficulty="easy" data-project="boat">
                <div class="project-status" id="boat-status">🔒</div>
                <div class="project-header">
                    <div class="project-emoji bouncing">🚤</div>
                    <div class="project-meta">
                        <h3>Rubber Band Boat</h3>
                        <div class="badges">
                            <div class="difficulty-badge easy">Easy</div>
                            <div class="time-badge">⏱️ 20 min</div>
                        </div>
                    </div>
                </div>
                
                <p class="project-description">Build a self-propelled boat using a plastic bottle and rubber band!</p>
                
                <div class="materials-preview">
                    <div class="materials-toggle" onclick="toggleMaterials('boat')">
                        <strong>📦 Materials</strong>
                        <span class="toggle-arrow" id="boat-arrow">▼</span>
                    </div>
                    <div class="materials-list" id="boat-materials" style="display: none;">
                        <div class="material-item">✓ 1 empty plastic water bottle</div>
                        <div class="material-item">✓ 3 popsicle sticks</div>
                        <div class="material-item">✓ 1 strong rubber band</div>
                        <div class="material-item">✓ Tape</div>
                    </div>
                </div>
                
                <div class="project-actions">
                    <button class="start-btn" id="boat-start" onclick="startProject('boat')">🚀 Start Building</button>
                    <button class="complete-btn" id="boat-complete" onclick="toggleComplete('boat')" style="display: none;">✅ Mark Complete</button>
                    <button class="undo-btn" id="boat-undo" onclick="undoComplete('boat')" style="display: none;">↩️ Undo Complete</button>
                    <button class="close-btn" id="boat-close" onclick="closeInstructions('boat')" style="display: none;">❌ Close Instructions</button>
                </div>

                <div class="project-instructions" id="boat-instructions" style="display: none;">
                    <div class="instruction-step active" data-step="1">
                        <h4>Step 1: Prepare the Hull</h4>
                        <p>Use the plastic bottle as your boat body. Make sure it's sealed and floats. Decorate it however you want!</p>
                        <div class="step-nav">
                            <button onclick="nextStep('boat', 2)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="2">
                        <h4>Step 2: Create Paddle Support</h4>
                        <p>Tape two popsicle sticks parallel to each other near the back of the bottle with a small gap between them.</p>
                        <div class="step-nav">
                            <button onclick="prevStep('boat', 1)">← Previous</button>
                            <button onclick="nextStep('boat', 3)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="3">
                        <h4>Step 3: Add Rubber Band</h4>
                        <p>Stretch the rubber band between the two popsicle sticks. Make sure it's tight but not about to snap.</p>
                        <div class="step-nav">
                            <button onclick="prevStep('boat', 2)">← Previous</button>
                            <button onclick="nextStep('boat', 4)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="4">
                        <h4>Step 4: Make the Paddle</h4>
                        <p>Cut a popsicle stick in half and slide it through the rubber band. Tape it together.</p>
                        <div class="step-nav">
                            <button onclick="prevStep('boat', 3)">← Previous</button>
                            <button onclick="nextStep('boat', 5)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="5">
                        <h4>Step 5: Launch!</h4>
                        <p>Wind the paddle backward, place in water, and release! Watch your boat zoom across the water!</p>
                        <div class="step-nav">
                            <button onclick="prevStep('boat', 4)">← Previous</button>
                            <button onclick="completeProject('boat')" class="complete-step-btn">🎉 Complete Project!</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- String Phone -->
            <div class="project-card interactive-card" data-difficulty="easy" data-project="phone">
                <div class="project-status" id="phone-status">🔒</div>
                <div class="project-header">
                    <div class="project-emoji bouncing">☎️</div>
                    <div class="project-meta">
                        <h3>String Phone</h3>
                        <div class="badges">
                            <div class="difficulty-badge easy">Easy</div>
                            <div class="time-badge">⏱️ 15 min</div>
                        </div>
                    </div>
                </div>
                
                <p class="project-description">Create a classic telephone using paper cups and string to learn about sound waves!</p>
                
                <div class="materials-preview">
                    <div class="materials-toggle" onclick="toggleMaterials('phone')">
                        <strong>📦 Materials</strong>
                        <span class="toggle-arrow" id="phone-arrow">▼</span>
                    </div>
                    <div class="materials-list" id="phone-materials" style="display: none;">
                        <div class="material-item">✓ 2 paper cups</div>
                        <div class="material-item">✓ String (10-30 feet)</div>
                        <div class="material-item">✓ Sharp pencil or nail</div>
                        <div class="material-item">✓ 2 paper clips (optional)</div>
                    </div>
                </div>
                
                <div class="project-actions">
                    <button class="start-btn" id="phone-start" onclick="startProject('phone')">🚀 Start Building</button>
                    <button class="complete-btn" id="phone-complete" onclick="toggleComplete('phone')" style="display: none;">✅ Mark Complete</button>
                    <button class="undo-btn" id="phone-undo" onclick="undoComplete('phone')" style="display: none;">↩️ Undo Complete</button>
                    <button class="close-btn" id="phone-close" onclick="closeInstructions('phone')" style="display: none;">❌ Close Instructions</button>
                </div>

                <div class="project-instructions" id="phone-instructions" style="display: none;">
                    <div class="instruction-step active" data-step="1">
                        <h4>Step 1: Prepare the Cups</h4>
                        <p>Use a sharp pencil or nail to poke a small hole in the bottom center of each paper cup. Be careful!</p>
                        <div class="step-nav">
                            <button onclick="nextStep('phone', 2)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="2">
                        <h4>Step 2: Thread the String</h4>
                        <p>Push one end of the string through the hole in the first cup from the outside to the inside.</p>
                        <div class="step-nav">
                            <button onclick="prevStep('phone', 1)">← Previous</button>
                            <button onclick="nextStep('phone', 3)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="3">
                        <h4>Step 3: Secure the String</h4>
                        <p>Tie a knot at the end of the string inside the cup, or attach a paper clip to prevent it from pulling through.</p>
                        <div class="step-nav">
                            <button onclick="prevStep('phone', 2)">← Previous</button>
                            <button onclick="nextStep('phone', 4)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="4">
                        <h4>Step 4: Attach Second Cup</h4>
                        <p>Thread the other end of the string through the second cup and secure it the same way.</p>
                        <div class="step-nav">
                            <button onclick="prevStep('phone', 3)">← Previous</button>
                            <button onclick="nextStep('phone', 5)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="5">
                        <h4>Step 5: Test Your Phone!</h4>
                        <p>Pull the string tight between two people. One talks into their cup while the other listens. The vibrations travel through the string!</p>
                        <div class="step-nav">
                            <button onclick="prevStep('phone', 4)">← Previous</button>
                            <button onclick="completeProject('phone')" class="complete-step-btn">🎉 Complete Project!</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Balloon Car -->
            <div class="project-card interactive-card" data-difficulty="medium" data-project="car">
                <div class="project-status" id="car-status">🔒</div>
                <div class="project-header">
                    <div class="project-emoji bouncing">🏎️</div>
                    <div class="project-meta">
                        <h3>Balloon Car</h3>
                        <div class="badges">
                            <div class="difficulty-badge medium">Medium</div>
                            <div class="time-badge">⏱️ 35 min</div>
                        </div>
                    </div>
                </div>
                
                <p class="project-description">Build a car powered by escaping air from a balloon - learn about Newton's laws!</p>
                
                <div class="materials-preview">
                    <div class="materials-toggle" onclick="toggleMaterials('car')">
                        <strong>📦 Materials</strong>
                        <span class="toggle-arrow" id="car-arrow">▼</span>
                    </div>
                    <div class="materials-list" id="car-materials" style="display: none;">
                        <div class="material-item">✓ Plastic bottle or cardboard</div>
                        <div class="material-item">✓ 4 bottle caps</div>
                        <div class="material-item">✓ 2 wooden skewers</div>
                        <div class="material-item">✓ 1 straw & 1 balloon</div>
                        <div class="material-item">✓ Tape & scissors</div>
                    </div>
                </div>
                
                <div class="project-actions">
                    <button class="start-btn" id="car-start" onclick="startProject('car')">🚀 Start Building</button>
                    <button class="complete-btn" id="car-complete" onclick="toggleComplete('car')" style="display: none;">✅ Mark Complete</button>
                    <button class="undo-btn" id="car-undo" onclick="undoComplete('car')" style="display: none;">↩️ Undo Complete</button>
                    <button class="close-btn" id="car-close" onclick="closeInstructions('car')" style="display: none;">❌ Close Instructions</button>
                </div>

                <div class="project-instructions" id="car-instructions" style="display: none;">
                    <div class="instruction-step active" data-step="1">
                        <h4>Step 1: Make Wheels</h4>
                        <p>Carefully poke holes through the center of 4 bottle caps. Push skewers through to create two axles with wheels.</p>
                        <div class="step-nav">
                            <button onclick="nextStep('car', 2)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="2">
                        <h4>Step 2: Build Car Body</h4>
                        <p>Cut the bottle in half lengthwise or use cardboard. Poke holes for axles and ensure wheels spin freely.</p>
                        <div class="step-nav">
                            <button onclick="prevStep('car', 1)">← Previous</button>
                            <button onclick="nextStep('car', 3)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="3">
                        <h4>Step 3: Prepare Balloon System</h4>
                        <p>Insert straw into balloon opening and tape it very securely - no air should escape!</p>
                        <div class="step-nav">
                            <button onclick="prevStep('car', 2)">← Previous</button>
                            <button onclick="nextStep('car', 4)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="4">
                        <h4>Step 4: Attach Propulsion</h4>
                        <p>Tape balloon to car body with straw pointing backward. Make sure it's centered for straight driving.</p>
                        <div class="step-nav">
                            <button onclick="prevStep('car', 3)">← Previous</button>
                            <button onclick="nextStep('car', 5)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="5">
                        <h4>Step 5: Race Time!</h4>
                        <p>Blow up balloon through straw, pinch to hold air, place on smooth floor, and release! Measure how far it goes!</p>
                        <div class="step-nav">
                            <button onclick="prevStep('car', 4)">← Previous</button>
                            <button onclick="completeProject('car')" class="complete-step-btn">🎉 Complete Project!</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Robot Arm Grabber -->
            <div class="project-card interactive-card" data-difficulty="hard" data-project="robot">
                <div class="project-status" id="robot-status">🔒</div>
                <div class="project-header">
                    <div class="project-emoji bouncing">🦾</div>
                    <div class="project-meta">
                        <h3>Robot Arm Grabber</h3>
                        <div class="badges">
                            <div class="difficulty-badge hard">Advanced</div>
                            <div class="time-badge">⏱️ 60 min</div>
                        </div>
                    </div>
                </div>
                
                <p class="project-description">Create a mechanical grabber that works like a real robot arm using engineering principles!</p>
                
                <div class="materials-preview">
                    <div class="materials-toggle" onclick="toggleMaterials('robot')">
                        <strong>📦 Materials</strong>
                        <span class="toggle-arrow" id="robot-arrow">▼</span>
                    </div>
                    <div class="materials-list" id="robot-materials" style="display: none;">
                        <div class="material-item">✓ 1 wooden ruler or stick</div>
                        <div class="material-item">✓ Cardboard strips (multiple)</div>
                        <div class="material-item">✓ 6-8 paper fasteners</div>
                        <div class="material-item">✓ Tape & scissors</div>
                        <div class="material-item">✓ Rubber bands & string</div>
                    </div>
                </div>
                
                <div class="project-actions">
                    <button class="start-btn" id="robot-start" onclick="startProject('robot')">🚀 Start Building</button>
                    <button class="complete-btn" id="robot-complete" onclick="toggleComplete('robot')" style="display: none;">✅ Mark Complete</button>
                    <button class="undo-btn" id="robot-undo" onclick="undoComplete('robot')" style="display: none;">↩️ Undo Complete</button>
                    <button class="close-btn" id="robot-close" onclick="closeInstructions('robot')" style="display: none;">❌ Close Instructions</button>
                </div>

                <div class="project-instructions" id="robot-instructions" style="display: none;">
                    <div class="instruction-step active" data-step="1">
                        <h4>Step 1: Cut Cardboard Strips</h4>
                        <p>Cut 6 cardboard strips: 4 long (8 inches) and 2 short (4 inches). Punch holes at both ends of each strip.</p>
                        <div class="step-nav">
                            <button onclick="nextStep('robot', 2)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="2">
                        <h4>Step 2: Build Scissor Mechanism</h4>
                        <p>Cross two long strips into an "X" and connect at center with paper fastener. Repeat for second pair.</p>
                        <div class="step-nav">
                            <button onclick="prevStep('robot', 1)">← Previous</button>
                            <button onclick="nextStep('robot', 3)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="3">
                        <h4>Step 3: Connect the Linkages</h4>
                        <p>Use short strips to connect the X-shapes at top and bottom, creating a diamond pattern that expands/contracts.</p>
                        <div class="step-nav">
                            <button onclick="prevStep('robot', 2)">← Previous</button>
                            <button onclick="nextStep('robot', 4)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="4">
                        <h4>Step 4: Attach to Handle</h4>
                        <p>Secure the mechanism to the ruler handle. Add grippers (folded cardboard) to the end for grabbing.</p>
                        <div class="step-nav">
                            <button onclick="prevStep('robot', 3)">← Previous</button>
                            <button onclick="nextStep('robot', 5)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="5">
                        <h4>Step 5: Add Control System</h4>
                        <p>Attach string to control opening/closing. Add rubber band for automatic closing action. Test and adjust!</p>
                        <div class="step-nav">
                            <button onclick="prevStep('robot', 4)">← Previous</button>
                            <button onclick="nextStep('robot', 6)">Next Step →</button>
                        </div>
                    </div>
                    <div class="instruction-step" data-step="6">
                        <h4>Step 6: Master Your Grabber!</h4>
                        <p>Practice picking up lightweight objects. Challenge: Can you pick up a cotton ball without crushing it?</p>
                        <div class="step-nav">
                            <button onclick="prevStep('robot', 5)">← Previous</button>
                            <button onclick="completeProject('robot')" class="complete-step-btn">🎉 Complete Project!</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Achievement Section -->
        <div class="achievements-section" id="achievements" style="display: none;">
            <h2>🏆 Achievements Unlocked!</h2>
            <div class="achievement-grid" id="achievement-list">
                <!-- Achievements will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Completion Celebration Modal -->
    <div class="celebration-modal" id="celebrationModal" style="display: none;">
        <div class="celebration-content">
            <div class="confetti-container" id="confettiContainer"></div>
            <div class="celebration-message">
                <h2>🎉 Amazing Job!</h2>
                <p id="celebrationText">You've completed the project!</p>
                <div class="celebration-icon" id="celebrationIcon">✨</div>
                <button onclick="closeCelebration()" class="celebration-close">Continue Building</button>
            </div>
        </div>
    </div>

    <style>
        /* Additional styles for new features */
        .undo-btn, .close-btn {
            background: #6b7280;
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 20px;
            font-family: 'Fredoka', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            flex: 1;
        }

        .undo-btn:hover {
            background: #4b5563;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .close-btn {
            background: #dc2626;
        }

        .close-btn:hover {
            background: #b91c1c;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(220, 38, 38, 0.3);
        }

        /* Celebration Modal */
        .celebration-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .celebration-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            position: relative;
            max-width: 400px;
            animation: bounceIn 0.6s ease;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        .celebration-message h2 {
            color: #6c5ce7;
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .celebration-message p {
            color: #666;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .celebration-icon {
            font-size: 5rem;
            margin: 20px 0;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .celebration-close {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .celebration-close:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        /* Confetti */
        .confetti-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confetti-fall 3s linear;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
    </style>

    <script>
        let completedProjects = JSON.parse(localStorage.getItem('completedProjects') || '[]');
        let currentSteps = {};

        function updateProgress() {
            const totalProjects = 4;
            const completed = completedProjects.length;
            const percentage = (completed / totalProjects) * 100;
            
            document.getElementById('progressFill').style.width = percentage + '%';
            
            if (completed === 0) {
                document.querySelector('.progress-text').textContent = 'Complete projects to unlock achievements!';
            } else if (completed === totalProjects) {
                document.querySelector('.progress-text').textContent = '🎉 Master Engineer! All projects completed!';
                showAchievements();
            } else {
                document.querySelector('.progress-text').textContent = `${completed}/${totalProjects} projects completed - Keep building!`;
            }
        }

        function updateProjectStatus() {
            completedProjects.forEach(project => {
                const statusEl = document.getElementById(project + '-status');
                if (statusEl) statusEl.textContent = '✅';
                
                const card = document.querySelector(`[data-project="${project}"]`);
                if (card) card.classList.add('completed');
                
                // Update button visibility
                const completeBtn = document.getElementById(project + '-complete');
                const undoBtn = document.getElementById(project + '-undo');
                if (completeBtn) completeBtn.style.display = 'none';
                if (undoBtn) undoBtn.style.display = 'inline-block';
            });
        }

        function filterProjects(difficulty) {
            const cards = document.querySelectorAll('.project-card');
            const buttons = document.querySelectorAll('.filter-btn');
            
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            cards.forEach(card => {
                if (difficulty === 'all' || card.dataset.difficulty === difficulty) {
                    card.style.display = 'block';
                    setTimeout(() => card.style.opacity = '1', 10);
                } else {
                    card.style.opacity = '0';
                    setTimeout(() => card.style.display = 'none', 300);
                }
            });
        }

        function toggleMaterials(project) {
            const materials = document.getElementById(project + '-materials');
            const arrow = document.getElementById(project + '-arrow');
            
            if (materials.style.display === 'none') {
                materials.style.display = 'block';
                arrow.textContent = '▲';
            } else {
                materials.style.display = 'none';
                arrow.textContent = '▼';
            }
        }

        function startProject(project) {
            const instructions = document.getElementById(project + '-instructions');
            const startBtn = document.getElementById(project + '-start');
            const completeBtn = document.getElementById(project + '-complete');
            const closeBtn = document.getElementById(project + '-close');
            
            instructions.style.display = 'block';
            startBtn.style.display = 'none';
            closeBtn.style.display = 'inline-block';
            
            if (!completedProjects.includes(project)) {
                completeBtn.style.display = 'inline-block';
            }
            
            currentSteps[project] = 1;
        }

        function closeInstructions(project) {
            const instructions = document.getElementById(project + '-instructions');
            const startBtn = document.getElementById(project + '-start');
            const completeBtn = document.getElementById(project + '-complete');
            const undoBtn = document.getElementById(project + '-undo');
            const closeBtn = document.getElementById(project + '-close');
            
            instructions.style.display = 'none';
            startBtn.style.display = 'inline-block';
            completeBtn.style.display = 'none';
            closeBtn.style.display = 'none';
            
            if (completedProjects.includes(project)) {
                undoBtn.style.display = 'inline-block';
                startBtn.style.display = 'none';
            }
        }

        function nextStep(project, stepNum) {
            const currentStep = document.querySelector(`#${project}-instructions .instruction-step[data-step="${currentSteps[project]}"]`);
            const nextStep = document.querySelector(`#${project}-instructions .instruction-step[data-step="${stepNum}"]`);
            
            currentStep.classList.remove('active');
            nextStep.classList.add('active');
            currentSteps[project] = stepNum;
        }

        function prevStep(project, stepNum) {
            const currentStep = document.querySelector(`#${project}-instructions .instruction-step[data-step="${currentSteps[project]}"]`);
            const prevStep = document.querySelector(`#${project}-instructions .instruction-step[data-step="${stepNum}"]`);
            
            currentStep.classList.remove('active');
            prevStep.classList.add('active');
            currentSteps[project] = stepNum;
        }

        function toggleComplete(project) {
            if (!completedProjects.includes(project)) {
                completeProject(project);
            }
        }

        function undoComplete(project) {
            completedProjects = completedProjects.filter(p => p !== project);
            localStorage.setItem('completedProjects', JSON.stringify(completedProjects));
            
            const statusEl = document.getElementById(project + '-status');
            statusEl.textContent = '🔒';
            
            const card = document.querySelector(`[data-project="${project}"]`);
            card.classList.remove('completed');
            
            const completeBtn = document.getElementById(project + '-complete');
            const undoBtn = document.getElementById(project + '-undo');
            const startBtn = document.getElementById(project + '-start');
            
            completeBtn.style.display = 'inline-block';
            undoBtn.style.display = 'none';
            startBtn.style.display = 'inline-block';
            
            updateProgress();
        }

        function completeProject(project) {
            if (!completedProjects.includes(project)) {
                completedProjects.push(project);
                localStorage.setItem('completedProjects', JSON.stringify(completedProjects));
                
                const statusEl = document.getElementById(project + '-status');
                statusEl.textContent = '✅';
                
                const card = document.querySelector(`[data-project="${project}"]`);
                card.classList.add('completed');
                
                // Update buttons
                const completeBtn = document.getElementById(project + '-complete');
                const undoBtn = document.getElementById(project + '-undo');
                const closeBtn = document.getElementById(project + '-close');
                const startBtn = document.getElementById(project + '-start');
                
                completeBtn.style.display = 'none';
                undoBtn.style.display = 'inline-block';
                closeBtn.style.display = 'none';
                startBtn.style.display = 'none';
                
                // Hide instructions
                const instructions = document.getElementById(project + '-instructions');
                instructions.style.display = 'none';
                
                // Show celebration
                showCelebration(project);
                
                updateProgress();
            }
        }

        function showCelebration(project) {
            const projectNames = {
                'boat': 'Rubber Band Boat',
                'robot': 'Robot Arm Grabber',
                'phone': 'String Phone',
                'car': 'Balloon Car'
            };
            
            const celebrationModal = document.getElementById('celebrationModal');
            const celebrationText = document.getElementById('celebrationText');
            const celebrationIcon = document.getElementById('celebrationIcon');
            const confettiContainer = document.getElementById('confettiContainer');
            
            celebrationText.textContent = `You've completed the ${projectNames[project]}!`;
            
            // Project-specific icons
            const icons = {
                'boat': '🚤',
                'robot': '🦾',
                'phone': '☎️',
                'car': '🏎️'
            };
            celebrationIcon.textContent = icons[project];
            
            // Clear old confetti
            confettiContainer.innerHTML = '';
            
            // Create confetti
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#dfe6e9'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                confettiContainer.appendChild(confetti);
            }
            
            celebrationModal.style.display = 'flex';
            
            // Check if all projects completed
            if (completedProjects.length === 4) {
                setTimeout(() => {
                    celebrationText.textContent = "🏆 You're a Master Engineer! All projects completed!";
                }, 2000);
            }
        }

        function closeCelebration() {
            const celebrationModal = document.getElementById('celebrationModal');
            celebrationModal.style.display = 'none';
        }

        function showAchievements() {
            const achievementsSection = document.getElementById('achievements');
            const achievementList = document.getElementById('achievement-list');
            
            const achievements = [
                { icon: '🚢', title: 'Naval Engineer', desc: 'Built your first boat!' },
                { icon: '📞', title: 'Communication Expert', desc: 'Created a string telephone!' },
                { icon: '🏁', title: 'Speed Racer', desc: 'Built a balloon-powered car!' },
                { icon: '🤖', title: 'Robotics Master', desc: 'Created a mechanical grabber!' },
                { icon: '👑', title: 'Master Engineer', desc: 'Completed all projects!' }
            ];
            
            achievementList.innerHTML = achievements.map(achievement => `
                <div class="achievement-card">
                    <div class="achievement-icon">${achievement.icon}</div>
                    <h4>${achievement.title}</h4>
                    <p>${achievement.desc}</p>
                </div>
            `).join('');
            
            achievementsSection.style.display = 'block';
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
            updateProjectStatus();
            
            if (completedProjects.length === 4) {
                showAchievements();
            }
        });

        // Close celebration on click outside
        document.getElementById('celebrationModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCelebration();
            }
        });
    </script>
    <script src="navigation.js"></script>
</body>
</html>
